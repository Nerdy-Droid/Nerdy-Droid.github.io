<html>
<head>
<title>Game Nite</title>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf8" src="bggAPI.js"></script>
<script type="text/javascript" src="bggData.json"></script>


<style>
.searchBoxes {
    padding: 25px;
    border: 1px solid #4CAF50;
}

.inputBox{
     padding: 25px 50px 25px 100px;
}

</style>

</head>

<body>
<div class="container">
<h1 align="center">Game Nite</h1><br/>

<form name="myForm">

<div id="search" class="searchBoxes">
<span class="inputBox"> Search Your Collection: <input type="text" id="bggID" placeholder="Enter BGG User Name" name="numPlay">
<input type="submit" id="getID" value="Find Your Games"><br/></br/></span>
</form>
</div>

<table id="example" class="dataTable" style="width:100%">
<thead>
<tr>


<th>Name</th>
<th>Min # Players</th>
<th>Max # Players</th>
<th>Avg Time</th>
<th>Year</th>
<th>Geek Rating</th>
<th>Mechanic</th>
<th>Category</th>
<th>Weight</th>
</tr>

</thead>
<tbody>

</tbody>
</table>
</body>
</html>

<script>

$(document).ready(function() {

$('#example').DataTable({
	"ajax": "bggData.json",
	"columns": [
		{"data" : "names"},
		{"data" : "min_players"},
		{"data" : "max_players"},
		{"data" : "avg_time"},
		{"data" : "year"},
		{"data" : "geek_rating"},
		{"data" : "mechanic"},
		{"data" : "category"},
		{"data" : "weight"}
	]

});
});

  var url = "https://boardgamegeek.com/xmlapi/collection/"
  var id = new Array();
  getGames('aebrey')

  $('#getID').on('click', function (e) {
    getGames($('#bggID').val())
  })

  function getGames (userID) {
    var id = userID
    var string = url + userID     
    
    $.ajax({
     url: string,
     dataType: "xml",
      // Work with the response
      success: function (xml) {
        console.log (xml)
        updateUISuccess(xml)
      },

      error: function () {
        updateUIError()
      }
    })
  }

  function updateUISuccess (xml) {
    $(xml).find('items').each(function(){
    id.push($(this).find('item').attr('objectid'))
})
         console.log(id)
  }

  function updateUIError () {
    alert('There was an error getting your games :(')
  }
</script>